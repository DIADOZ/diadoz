<div class="container">
    <div [hidden]="submitted">
        <h1>Post Form</h1>
        <form (ngSubmit)="onSubmit()" #postForm="ngForm">
            <!-- TODO: Remove once implementation done -->
            {{diagnostic}}
            <div class="form-group">
                <label for="headline">Headline</label>
                <input type="text" class="form-control" id="headline" required
                [(ngModel)] = 'model.headline' name='headline' #headline='ngModel'
                #spy>
                <div [hidden]="headline.valid || headline.pristine"
                class="alert alert-danger">
                    Headline is required
                </div>
                {{spy.className}}
            </div>

            <div class="form-group">
                <label for="subHeadline">Sub-Headline</label>
                <input type="text" class="form-control" id="subHeadline"
                [(ngModel)]='model.subHeadline' name='subHeadline'>
            </div>

            <div class="form-group">
                <label for="postType">Post Type</label>
                <select class="form-control" id="postType" required
                [(ngModel)]='model.postType' name='postType'>
                    <option *ngFor="let type of postTypes" [value]="type">{{type}}</option>
                </select>
            </div>

            <div class="form-group">
                <label for="featuredImage">Featured Image</label>
                <input type="text" class="form-control" id="featuredImage"
                [(ngModel)]='model.featuredImage' name='featuredImage'>
            </div>

            <div class="form-group">
                <label for="customURL">Custom URL</label>
                <input type="text" class="form-control" id="customURL"
                [(ngModel)]='model.customURL' name='customURL' #url #customURL="ngModel"
                [value]='customURL.untouched ? slugify(model.headline) : model.customURL'
                >
                {{url.className}}
            </div>

            <!-- body -->

            <div class="form-group">
                <label for="publishDate">Publish Date</label>
                <md2-datepicker type='datetime' name='publishDate'
                [(ngModel)]="model.publishDate"></md2-datepicker>
            </div>

            <div class="form-group">
                <!-- <label for="published">Published</label> -->
                <mat-checkbox class="form-control" name='published'
                [(ngModel)]="model.published">Published</mat-checkbox>
            </div>

            <div class="form-group">
                <label for="publishedBy">Published By</label>
                {{model.publishedBy}}
            </div>

            <div class="form-group">
                <label for="body">Post Body</label>
                <mat-button-toggle (click)="toggleMedia()">
                        Media
                        <i class="material-icons">add</i>
                    </mat-button-toggle>
                    <mat-button-toggle (click)="toggleArtCard()">
                        Art Card
                        <i class="material-icons">add</i>
                    </mat-button-toggle>
                <mat-button-toggle (click)="toggleBody()">
                    Body
                    <i class="material-icons">add</i>
                </mat-button-toggle>
            </div>
            
            <!-- media section -->
            <div id='mediaData' class='hide'>
                    <label for="mediaTitle">Title</label>
                    <input type="text" class="form-control" id="mediaTitle"
                    [(ngModel)]="media.title" name=title>
                    <label for="embed">Embed</label>
                    <input type="text" class="form-control" id="embed"
                    [(ngModel)]="media.embed" name=embed>
                    <label for="mediaType">Embed Type</label>

                    <select class="form-control" id="mediaType"
                    [(ngModel)]='media.type' name='mediaType'>
                        <option *ngFor="let type of mediaTypes" [value]="type">{{type}}</option>
                    </select>

                    <label for="width">Width</label>
                    <mat-radio-group [(ngModel)]="media.width" name='width'>
                        <mat-radio-button value="fullWidth">Full-Width</mat-radio-button>
                        <mat-radio-button value="semiFullWidth">Semi-Full-Width</mat-radio-button>
                        <mat-radio-button value="halfWidth">Half-Width</mat-radio-button>
                        <mat-radio-button value="columnWidth">Column-Width</mat-radio-button>
                        <mat-radio-button value="halfColumnWidth">Half-Column-Width</mat-radio-button>
                        <mat-radio-button value="miniColumnWidth">Mini-Column-Width</mat-radio-button>
                    </mat-radio-group>
                    <!-- <input type="text" class="form-control" id="width"
                    [(ngModel)]="media.width" name=width> -->
                <mat-button-toggle (click)="addMedia()">
                        <i class="material-icons">add</i>
                </mat-button-toggle>
            </div>

            <!-- art card section -->
            <div id='artCardData' class='hide'>
                    <label for="artCardTitle">Title</label>
                    <input type="text" class="form-control" id="artCardTitle"
                    [(ngModel)]="artCard.title" name=title>
                    <label for="primaryContributor">Primary Contributor</label>
                    <input type="text" class="form-control" id="primaryContributor"
                    [(ngModel)]="artCard.primaryContributor" name=primaryContributor>
                    <label for="secondaryContributor">Secondary Contributor</label>
                    <input type="text" class="form-control" id="secondaryContributor"
                    [(ngModel)]="artCard.secondaryContributor" name=secondaryContributor>
                    <label for="primaryType">Primary Type</label>
                    <input type="text" class="form-control" id="primaryType"
                    [(ngModel)]="artCard.primaryType" name=primaryType>
                    <label for="summary">Summary</label>
                    <input type="text" class="form-control" id="summary"
                    [(ngModel)]="artCard.summary" name=summary>
                    <label for="support">Support</label>
                    <input type="text" class="form-control" id="support"
                    [(ngModel)]="artCard.support" name=support>
                    <label for="sources">Sources</label>
                    <input type="text" class="form-control" id="sources"
                    [(ngModel)]="source" name=source>
                    <mat-button-toggle (click)="addSource()">
                        <i class="material-icons">add</i>
                    </mat-button-toggle>
                    <label for="contributingArtists">Contributing Artists</label>
                    <input type="text" class="form-control" id="contributingArtists"
                    [(ngModel)]="artist" name=artist>
                    <mat-button-toggle (click)="addArtist()">
                        <i class="material-icons">add</i>
                    </mat-button-toggle>
                    <br>
                <mat-button-toggle (click)="addArtCard()">
                        <i class="material-icons">add</i>
                </mat-button-toggle>
            </div>

            <!-- body section -->
            <div id='bodyData' class='hide'>
                <textarea id='tiny'></textarea>
                <mat-button-toggle (click)="addBody()">
                        <i class="material-icons">add</i>
                </mat-button-toggle>
            </div>
            
            
            <button type="button" class="btn btn-default" (click)="newPost(); postForm.reset()">Reset</button>
            <button type="submit" class="btn btn-success" [disabled]="!postForm.form.valid">Review</button>
        
        </form>
    </div>
    <div [hidden]="!submitted">
        <h2>You submitted the following:</h2>
        <div class="row">
            <div class="col-xs-3">Headline</div>
            <div class="col-xs-9  pull-left">{{ model.headline }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Sub-Headline</div>
            <div class="col-xs-9 pull-left">{{ model.subHeadline }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Post Type</div>
            <div class="col-xs-9 pull-left">{{ model.postType }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Featured Image</div>
            <div class="col-xs-9 pull-left">{{ model.featuredImage }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Custom URL</div>
            <div class="col-xs-9 pull-left">/post/{{ model.customURL }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Publish Date</div>
            <div class="col-xs-9 pull-left">{{ model.publishDate }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Published</div>
            <div class="col-xs-9 pull-left">{{ model.published }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Published By</div>
            <div class="col-xs-9 pull-left">{{ model.publishedBy }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Sub-Headline</div>
            <div class="col-xs-9 pull-left">{{ model.subHeadline }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Body</div>
            <li class="col-xs-9 pull-left" *ngFor='let row of model.body'>{{ row }}</li>
        </div>
        <br>
        <button class="btn btn-primary" (click)="submitted=false">Edit</button>
        <button class="btn btn-primary" (click)="sendData()">Submit</button>
    </div>
</div>